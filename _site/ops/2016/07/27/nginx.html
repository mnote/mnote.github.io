<!DOCTYPE html>
<html lang="en_US">
  <head>

    

    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>nginx | mnote</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="nginx" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="config syntax" />
<meta property="og:description" content="config syntax" />
<link rel="canonical" href="http://localhost:4000/ops/2016/07/27/nginx.html" />
<meta property="og:url" content="http://localhost:4000/ops/2016/07/27/nginx.html" />
<meta property="og:site_name" content="mnote" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-07-27T00:00:00+08:00" />
<script type="application/ld+json">
{"url":"http://localhost:4000/ops/2016/07/27/nginx.html","headline":"nginx","dateModified":"2016-07-27T00:00:00+08:00","datePublished":"2016-07-27T00:00:00+08:00","description":"config syntax","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/ops/2016/07/27/nginx.html"},"@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=">
  </head>
  <body>

    <header class="page-header" role="banner">
      <h1 class="project-name">mnote</h1>
      <h2 class="project-tagline"></h2>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<header class="post-header">
		<time class="post-date" datetime="2016-07-27T00:00:00+08:00">Jul 27, 2016</time>
		<h1 class="post-title">nginx</h1>
	</header>
	<h2 id="config-syntax">config syntax</h2>

<ul>
  <li>
    <p>/usr/local/etc/nginx/nginx.conf</p>
  </li>
  <li>
    <p>All lines preceded by a pound sign or hash (#) are comments.</p>
  </li>
  <li>
    <p>Settings begin with the <em>variable</em> name and then state an <em>argument</em> or series of <em>arguments</em> separated by <em>spaces</em>. Examples include <code class="highlighter-rouge">worker_processes 1;</code> and <code class="highlighter-rouge">error_log logs/error.log notice;</code>. All statements end with a <em>semicolon (;)</em>.</p>
  </li>
  <li>
    <p>Some settings, like the events variable above, have arguments that are themselves settings with arguments. All sub-directives are enclosed in one set of curly brackets ({ }).</p>
  </li>
  <li>
    <p>Tabs or multiple spaces are interpreted by nginx as a single space. Using tabs or spaces for indentation in a standardized way will greatly improve the readability of your file and make it easier to maintain.</p>
  </li>
</ul>

<h2 id="nuts-and-bolts">nuts and bolts</h2>

<p>When a <code class="highlighter-rouge">location</code> directive is followed by a tilde (<code class="highlighter-rouge">~</code>), Nginx performs a regular expression match. These matches are always case-sensitive.</p>

<p>If you want matches to be case insensitive, use a tilde with an asterisk (<code class="highlighter-rouge">~*</code>)</p>

<p>Adding a caret and tilde (<code class="highlighter-rouge">^~</code>) to your location directives tells Nginx, if it makes a match for a particular string, to stop searching for more specific matches and use the directives here instead.</p>

<p>Finally, if you add an equals sign (<code class="highlighter-rouge">=</code>) to the location setting, this forces an exact match with the path requested and then stops searching for more specific matches.</p>

<p>The document <code class="highlighter-rouge">root</code> is located in the specified directory</p>

<p>The <code class="highlighter-rouge">index</code> variable tells Nginx which file to serve if none is specified. If multiple files are specified for the index directive, Nginx will process the list in order and fulfill the request with the first file that exists.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#user  nobody;

worker_processes  1;

pid /usr/local/var/log/nginx.pid;


events {
    worker_connections  1024;
}


http {
    include       mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log /usr/local/var/log/nginx_access.log;
    error_log /usr/local/var/log/nginx_error.log;

    sendfile        on;
    tcp_nopush      on;
    tcp_nodelay     on;

    keepalive_timeout   65;

    gzip  on;

    server {
        listen       80;
        # Make site accessible from http://localhost/
        #server_name  localhost;
        # Make site accessible from domain and ip address
        server_name   "";

        #charset koi8-r;

        #location / {
        #    root   html;
        #    index  index.html index.htm;
        #}

        root    /Users/xxx/nginx/localhost;
        index   index.html index.htm index.php;

        location / {
            try_files $uri $uri/ /index.php$is_args$args;
            #try_files $uri $uri/ /index.html;
        }


        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        #location = /50x.html {
        #    root   html;
        #}

        location ~ \.php$ {
            fastcgi_pass 127.0.0.1:9000;
            fastcgi_split_path_info ^(.+\.php)(/.+)$;
            try_files $fastcgi_script_name =404;
            fastcgi_index index.php;
            include fastcgi.conf;
        }

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ \.php$ {
        #    proxy_pass   http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        #location ~ \.php$ {
        #    root           html;
        #    fastcgi_pass   127.0.0.1:9000;
        #    fastcgi_index  index.php;
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
        #    include        fastcgi_params;
        #}

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
        #    deny  all;
        #}

        location ~ /\. {
            deny all;
        }
    }


    # another virtual host using mix of IP-, name-, and port-based configuration
    #
    #server {
    #    listen       8000;
    #    listen       somename:8080;
    #    server_name  somename  alias  another.alias;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}


    # HTTPS server
    #
    #server {
    #    listen       443 ssl;
    #    server_name  localhost;

    #    ssl_certificate      cert.pem;
    #    ssl_certificate_key  cert.key;

    #    ssl_session_cache    shared:SSL:1m;
    #    ssl_session_timeout  5m;

    #    ssl_ciphers  HIGH:!aNULL:!MD5;
    #    ssl_prefer_server_ciphers  on;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}
    include servers/*;
}

</code></pre></div></div>

</article>
      <footer class="site-footer">
        
        <span class="site-footer-credits"><a id="go-top" href="#" onclick="scrollToTop();return false">This Page</a> was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>

    </main>
  </body>
</html>
